// 全局样式
@import 'reset';
@import 'components';

// ==================== 性能优化的动画 ====================
// 只保留必要的核心动画，减少GPU负担

@keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

@keyframes pulse {
    0%, 100% { opacity: 1; transform: scale(1); }
    50% { opacity: 0.7; transform: scale(1.02); }
}

@keyframes bounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-5px); }
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

@keyframes slideIn {
    from { transform: translateX(100%); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
}

@keyframes flash {
    0%, 100% { opacity: 0; }
    50% { opacity: 1; }
}

// ==================== 基础样式（性能优化版） ====================
body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    color: #333;
    line-height: 1.6;
    /* 启用硬件加速 */
    transform: translateZ(0);
    will-change: transform;
}

// 优化滚动性能
.main-content {
    /* 启用独立的合成层 */
    transform: translateZ(0);
    will-change: scroll-position;
    /* 优化滚动行为 */
    -webkit-overflow-scrolling: touch;
}

// 避免不必要的重绘
* {
    /* 减少重绘区域 */
    outline: none;
}

// 优化点击响应（减少延迟）
button, .action-card, .ambient-btn, .nav-item, .pet-float, .floating-reminder {
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
}

// 减少动画的GPU使用
@media (prefers-reduced-motion: reduce) {
    * {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
    }
}

// 滚动条美化
::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.1);
}

::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.3);
    border-radius: 4px;

    &:hover {
        background: rgba(255, 255, 255, 0.5);
    }
}

// 通用工具类
.text-center {
    text-align: center;
}

.mt-1 { margin-top: 8px; }
.mt-2 { margin-top: 16px; }
.mb-1 { margin-bottom: 8px; }
.mb-2 { margin-bottom: 16px; }

// 响应式断点
$mobile: 768px;
$tablet: 1024px;
$desktop: 1200px;

@mixin mobile {
    @media (max-width: #{$mobile}) {
        @content;
    }
}

@mixin tablet {
    @media (min-width: #{$mobile + 1}) and (max-width: #{$tablet}) {
        @content;
    }
}

@mixin desktop {
    @media (min-width: #{$desktop}) {
        @content;
    }
}

// 按钮基础样式
.btn {
    padding: 12px 24px;
    border: none;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
    display: inline-flex;
    align-items: center;
    gap: 8px;
    text-decoration: none;

    &:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }

    &:active {
        transform: translateY(0);
    }
}

.btn-primary {
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: white;
}

.btn-success {
    background: linear-gradient(135deg, #48bb78, #38a169);
    color: white;
}

.btn-warning {
    background: linear-gradient(135deg, #ed8936, #dd6b20);
    color: white;
}

.btn-danger {
    background: linear-gradient(135deg, #f56565, #c53030);
    color: white;
}

.btn-outline {
    background: white;
    color: #667eea;
    border: 2px solid #667eea;

    &:hover {
        background: #667eea;
        color: white;
    }
}

// 卡片基础样式
.card {
    background: white;
    border-radius: 12px;
    padding: 20px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    transition: all 0.2s;

    &:hover {
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
        transform: translateY(-2px);
    }
}

// 进度条
.progress-bar {
    width: 100%;
    height: 8px;
    background: #e0e0e0;
    border-radius: 4px;
    overflow: hidden;

    .progress-fill {
        height: 100%;
        background: linear-gradient(90deg, #667eea, #764ba2);
        transition: width 0.3s ease;
        border-radius: 4px;
    }
}

// 徽章
.badge {
    display: inline-block;
    padding: 4px 8px;
    border-radius: 12px;
    font-size: 12px;
    font-weight: 600;
    background: #667eea;
    color: white;
}

.badge-success {
    background: #48bb78;
}

.badge-warning {
    background: #ed8936;
}

.badge-danger {
    background: #f56565;
}

// 状态指示器
.status-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    display: inline-block;
    margin-right: 6px;

    &.active {
        background: #48bb78;
        animation: pulse 2s infinite;
    }

    &.inactive {
        background: #ccc;
    }

    &.warning {
        background: #ed8936;
    }

    &.error {
        background: #f56565;
    }
}

// 空状态
.empty-state {
    text-align: center;
    padding: 60px 20px;
    color: #999;

    .emoji {
        font-size: 48px;
        margin-bottom: 16px;
        opacity: 0.5;
    }

    h3 {
        margin: 0 0 8px 0;
        color: #666;
    }

    p {
        margin: 0;
        font-size: 14px;
    }
}

// 加载状态
.loading {
    display: inline-block;
    width: 20px;
    height: 20px;
    border: 3px solid rgba(255, 255, 255, 0.3);
    border-radius: 50%;
    border-top-color: white;
    animation: spin 1s ease-in-out infinite;
}

.loading-dark {
    border-color: rgba(0, 0, 0, 0.1);
    border-top-color: #667eea;
}

// 工具提示
.tooltip {
    position: relative;
    cursor: help;

    &:hover::after {
        content: attr(data-tooltip);
        position: absolute;
        bottom: 100%;
        left: 50%;
        transform: translateX(-50%);
        background: #333;
        color: white;
        padding: 6px 10px;
        border-radius: 6px;
        font-size: 12px;
        white-space: nowrap;
        z-index: 1000;
        margin-bottom: 6px;
    }

    &:hover::before {
        content: '';
        position: absolute;
        bottom: 100%;
        left: 50%;
        transform: translateX(-50%);
        border: 6px solid transparent;
        border-top-color: #333;
        margin-bottom: -6px;
    }
}

// 响应式图片
img {
    max-width: 100%;
    height: auto;
}

// 表单元素
input, select, textarea {
    font-family: inherit;
    font-size: inherit;

    &:focus {
        outline: none;
    }
}

// 隐藏元素
.sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
}

// 文本截断
.text-ellipsis {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.text-ellipsis-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

// 阴影
.shadow-sm { box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1); }
.shadow-md { box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); }
.shadow-lg { box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1); }

// 圆角
.rounded-sm { border-radius: 4px; }
.rounded-md { border-radius: 8px; }
.rounded-lg { border-radius: 12px; }
.rounded-xl { border-radius: 16px; }
.rounded-full { border-radius: 9999px; }

// 背景色
.bg-primary { background: #667eea; color: white; }
.bg-success { background: #48bb78; color: white; }
.bg-warning { background: #ed8936; color: white; }
.bg-danger { background: #f56565; color: white; }
.bg-light { background: #f8f9fa; }
.bg-white { background: white; }

// 文本颜色
.text-primary { color: #667eea; }
.text-success { color: #48bb78; }
.text-warning { color: #ed8936; }
.text-danger { color: #f56565; }
.text-muted { color: #6c757d; }
.text-white { color: white; }

// 边框
.border { border: 1px solid #e0e0e0; }
.border-top { border-top: 1px solid #e0e0e0; }
.border-bottom { border-bottom: 1px solid #e0e0e0; }
.border-left { border-left: 1px solid #e0e0e0; }
.border-right { border-right: 1px solid #e0e0e0; }

// 间距
.p-1 { padding: 8px; }
.p-2 { padding: 16px; }
.p-3 { padding: 24px; }
.p-4 { padding: 32px; }

.px-1 { padding-left: 8px; padding-right: 8px; }
.px-2 { padding-left: 16px; padding-right: 16px; }
.px-3 { padding-left: 24px; padding-right: 24px; }

.py-1 { padding-top: 8px; padding-bottom: 8px; }
.py-2 { padding-top: 16px; padding-bottom: 16px; }
.py-3 { padding-top: 24px; padding-bottom: 24px; }

.m-1 { margin: 8px; }
.m-2 { margin: 16px; }
.m-3 { margin: 24px; }
.m-4 { margin: 32px; }

.mx-1 { margin-left: 8px; margin-right: 8px; }
.mx-2 { margin-left: 16px; margin-right: 16px; }
.mx-3 { margin-left: 24px; margin-right: 24px; }

.my-1 { margin-top: 8px; margin-bottom: 8px; }
.my-2 { margin-top: 16px; margin-bottom: 16px; }
.my-3 { margin-top: 24px; margin-bottom: 24px; }

// 弹性布局
.flex { display: flex; }
.flex-col { flex-direction: column; }
.flex-wrap { flex-wrap: wrap; }
.items-center { align-items: center; }
.items-start { align-items: flex-start; }
.items-end { align-items: flex-end; }
.justify-center { justify-content: center; }
.justify-between { justify-content: space-between; }
.justify-around { justify-content: space-around; }
.gap-1 { gap: 8px; }
.gap-2 { gap: 16px; }
.gap-3 { gap: 24px; }

// 网格
.grid { display: grid; }
.grid-cols-2 { grid-template-columns: repeat(2, 1fr); }
.grid-cols-3 { grid-template-columns: repeat(3, 1fr); }
.grid-cols-4 { grid-template-columns: repeat(4, 1fr); }

// 文本对齐
.text-left { text-align: left; }
.text-center { text-align: center; }
.text-right { text-align: right; }

// 字重
.font-light { font-weight: 300; }
.font-normal { font-weight: 400; }
.font-medium { font-weight: 500; }
.font-semibold { font-weight: 600; }
.font-bold { font-weight: 700; }

// 字体大小
.text-xs { font-size: 12px; }
.text-sm { font-size: 14px; }
.text-base { font-size: 16px; }
.text-lg { font-size: 18px; }
.text-xl { font-size: 20px; }
.text-2xl { font-size: 24px; }
.text-3xl { font-size: 32px; }

// 显示/隐藏
.block { display: block; }
.inline { display: inline; }
.inline-block { display: inline-block; }
.hidden { display: none; }

// 定位
.relative { position: relative; }
.absolute { position: absolute; }
.fixed { position: fixed; }
.sticky { position: sticky; }

.top-0 { top: 0; }
.right-0 { right: 0; }
.bottom-0 { bottom: 0; }
.left-0 { left: 0; }

// 溢出
.overflow-hidden { overflow: hidden; }
.overflow-auto { overflow: auto; }
.overflow-scroll { overflow: scroll; }

// 不透明度
.opacity-0 { opacity: 0; }
.opacity-25 { opacity: 0.25; }
.opacity-50 { opacity: 0.5; }
.opacity-75 { opacity: 0.75; }
.opacity-100 { opacity: 1; }

// 鼠标指针
.cursor-pointer { cursor: pointer; }
.cursor-default { cursor: default; }
.cursor-not-allowed { cursor: not-allowed; }

// 选择
.user-select-none { user-select: none; }
.user-select-text { user-select: text; }

// 点击区域
.pointer-events-none { pointer-events: none; }
.pointer-events-auto { pointer-events: auto; }

// 滤镜
.filter-blur { filter: blur(2px); }
.filter-grayscale { filter: grayscale(100%); }
.filter-invert { filter: invert(100%); }

// 混合模式
.mix-blend-multiply { mix-blend-mode: multiply; }
.mix-blend-screen { mix-blend-mode: screen; }
.mix-blend-overlay { mix-blend-mode: overlay; }

// 背景裁剪
.bg-clip-text {
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

// 渐变文本
.gradient-text {
    background: linear-gradient(135deg, #667eea, #764ba2);
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

// 玻璃拟态
.glass {
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2);
}

// 毛玻璃
.frosted {
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(10px);
}

// 响应式容器
.container {
    width: 100%;
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px;

    @include mobile {
        padding: 0 16px;
    }
}

// 最大宽度限制
.max-w-xs { max-width: 320px; }
.max-w-sm { max-width: 640px; }
.max-w-md { max-width: 768px; }
.max-w-lg { max-width: 1024px; }
.max-w-xl { max-width: 1280px; }

// 最小高度
.min-h-screen { min-height: 100vh; }
.min-h-0 { min-height: 0; }

// 宽度
.w-full { width: 100%; }
.w-1\/2 { width: 50%; }
.w-1\/3 { width: 33.333%; }
.w-2\/3 { width: 66.667%; }
.w-1\/4 { width: 25%; }
.w-3\/4 { width: 75%; }

// 高度
.h-full { height: 100%; }
.h-screen { height: 100vh; }

// 旋转
.rotate-0 { transform: rotate(0deg); }
.rotate-45 { transform: rotate(45deg); }
.rotate-90 { transform: rotate(90deg); }
.rotate-180 { transform: rotate(180deg); }

// 缩放
.scale-75 { transform: scale(0.75); }
.scale-90 { transform: scale(0.9); }
.scale-100 { transform: scale(1); }
.scale-110 { transform: scale(1.1); }

// 平移
.translate-x-0 { transform: translateX(0); }
.translate-y-0 { transform: translateY(0); }

// 阴影增强
.shadow-glow {
    box-shadow: 0 0 20px rgba(102, 126, 234, 0.5);
}

.shadow-soft {
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
}

// 边框增强
.border-gradient {
    border: 2px solid transparent;
    background: linear-gradient(white, white) padding-box,
                linear-gradient(135deg, #667eea, #764ba2) border-box;
}

// 动画类
.animate-spin { animation: spin 1s linear infinite; }
.animate-pulse { animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
.animate-bounce { animation: bounce 1s infinite; }
.animate-float { animation: float 3s ease-in-out infinite; }

// 过渡
.transition { transition: all 0.3s ease; }
.transition-fast { transition: all 0.15s ease; }
.transition-slow { transition: all 0.5s ease; }

// 变换
.transform { transform: translateZ(0); }
.transform-gpu { transform: translate3d(0, 0, 0); }

// 无障碍
.sr-only-focusable:focus {
    position: static;
    width: auto;
    height: auto;
    clip: auto;
}

// 打印样式
@media print {
    .no-print { display: none !important; }

    body {
        background: white !important;
    }

    .card {
        box-shadow: none !important;
        border: 1px solid #ddd !important;
    }
}

// 暗色模式支持
@media (prefers-color-scheme: dark) {
    body {
        background: #1a1a1a;
        color: #e0e0e0;
    }

    .card {
        background: #2d2d2d;
        color: #e0e0e0;
    }

    .text-muted {
        color: #a0a0a0;
    }
}