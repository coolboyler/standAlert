import{_ as A,u as E,c as l,j as L,o as N,b as m,d as f,e as s,t as o,g as r,F as U,r as B,p as O,f as h,s as c,x as R,n as F,i as V}from"./index-b8c75c1a.js";const z={class:"stats-page"},I={class:"stats-container"},H={class:"key-metrics"},J={class:"metric-card"},W={class:"metric-value"},q={class:"metric-card"},G={class:"metric-value"},K={class:"metric-card"},Q={class:"metric-value"},X={class:"metric-card"},Y={class:"metric-value"},Z={class:"health-impact"},tt={class:"impact-grid"},st={class:"impact-item"},at={class:"impact-value"},et={class:"impact-item"},ot={class:"impact-value"},nt={class:"impact-item"},it={class:"impact-value"},lt={class:"history-chart"},dt={class:"chart-container"},rt={class:"chart-bars"},ct={class:"chart-label"},vt={class:"chart-value"},ut={class:"detailed-stats"},pt={class:"stats-grid"},mt={class:"stat-row"},ft={class:"value"},ht={class:"stat-row"},_t={class:"value"},St={class:"stat-row"},bt={class:"value"},gt={class:"stat-row"},yt={class:"value"},kt={class:"stat-row"},wt={class:"value"},Dt={class:"stat-row"},xt={class:"value"},Tt={__name:"Stats",setup(Mt){const a=E(),S=l(()=>Math.round(a.totalStands*25)),b=l(()=>{const e=a.totalStands*5,t=Math.floor(e/60),n=e%60;return t>0?`${t}å°æ—¶${n}åˆ†é’Ÿ`:`${n}åˆ†é’Ÿ`}),g=l(()=>{let e=50;return a.totalStands>100&&(e+=20),a.currentStreak>=7&&(e+=15),a.longestStreak>=30&&(e+=15),Math.min(100,e)}),v=L([{label:"ä¸€",stands:0,isToday:!1},{label:"äºŒ",stands:0,isToday:!1},{label:"ä¸‰",stands:0,isToday:!1},{label:"å››",stands:0,isToday:!1},{label:"äº”",stands:0,isToday:!1},{label:"å…­",stands:0,isToday:!1},{label:"æ—¥",stands:0,isToday:!1}]),y=l(()=>Math.max(...v.value.map(e=>e.stands),1)),k=l(()=>{var t;if(a.totalStands===0)return 0;const e=Math.max(1,Math.floor((Date.now()-(((t=a.history[0])==null?void 0:t.timestamp)||Date.now()))/864e5)+1);return(a.totalStands/e).toFixed(1)}),w=l(()=>{const e=Date.now()-6048e5;return a.history.filter(t=>t.timestamp>=e).length}),D=l(()=>{const e=Date.now()-2592e6;return a.history.filter(t=>t.timestamp>=e).length}),x=l(()=>a.achievements.filter(e=>e.unlocked).length),T=l(()=>a.achievements.length);function M(){const e=new Date().getDay(),t=e===0?6:e-1,n=Date.now()-7*864e5,d=a.history.filter(i=>i.timestamp>=n),u={};d.forEach(i=>{const p=new Date(i.timestamp).toDateString();u[p]=(u[p]||0)+1});for(let i=0;i<7;i++){const P=new Date(Date.now()-(6-i)*864e5).toDateString();v.value[i].stands=u[P]||0,v.value[i].isToday=i===t}}function $(){const e={user:{totalStands:a.totalStands,totalPoints:a.totalPoints,currentStreak:a.currentStreak,longestStreak:a.longestStreak,pet:a.pet},achievements:a.achievements,challenges:a.challenges,history:a.history,exportDate:new Date().toISOString()},t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),n=URL.createObjectURL(t),d=document.createElement("a");d.href=n,d.download=`standup-data-${Date.now()}.json`,d.click(),URL.revokeObjectURL(n),c("âœ… æ•°æ®å·²å¯¼å‡º","success")}async function j(){await R("ç¡®å®šè¦é‡ç½®æ‰€æœ‰æ•°æ®å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ï¼")&&(a.totalStands=0,a.todayStands=0,a.currentStreak=0,a.longestStreak=0,a.totalPoints=0,a.pet={name:"Standy",happiness:100,hunger:100,energy:100,level:1,xp:0,type:"default"},a.history=[],a.achievements.forEach(t=>t.unlocked=!1),a.challenges.forEach(t=>{t.progress=0,t.completed=!1}),c("ğŸ”„ æ•°æ®å·²é‡ç½®","info"))}function C(){const e=`æˆ‘åœ¨ç«™ç«‹å†’é™©ä¸­å·²ç»ç«™ç«‹äº† ${a.totalStands} æ¬¡ï¼å½“å‰è¿èƒœ ${a.currentStreak} å¤©ï¼Œæ€»ç§¯åˆ† ${a.totalPoints} åˆ†ï¼å¿«æ¥å’Œæˆ‘ä¸€èµ·ä¿æŒå¥åº·å§ï¼ğŸš¶â€â™‚ï¸ğŸ’ª`;navigator.share?navigator.share({title:"ç«™ç«‹å†’é™© - æˆ‘çš„è¿›åº¦",text:e}).then(()=>{c("âœ… åˆ†äº«æˆåŠŸï¼","success")}).catch(()=>{_(e)}):_(e)}function _(e){navigator.clipboard.writeText(e).then(()=>{c("ğŸ“‹ å·²å¤åˆ¶åˆ°å‰ªè´´æ¿","success")}).catch(()=>{c("å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶","error")})}return N(()=>{M()}),(e,t)=>(m(),f("div",z,[s("div",I,[t[24]||(t[24]=s("h2",null,"ğŸ“Š æ•°æ®ç»Ÿè®¡",-1)),t[25]||(t[25]=s("p",{class:"subtitle"},"æŸ¥çœ‹ä½ çš„ç«™ç«‹æ•°æ®å’Œå¥åº·è¶‹åŠ¿",-1)),s("div",H,[s("div",J,[s("div",W,o(r(a).totalStands),1),t[0]||(t[0]=s("div",{class:"metric-label"},"æ€»ç«™ç«‹æ¬¡æ•°",-1)),t[1]||(t[1]=s("div",{class:"metric-icon"},"ğŸ¯",-1))]),s("div",q,[s("div",G,o(r(a).todayStands),1),t[2]||(t[2]=s("div",{class:"metric-label"},"ä»Šæ—¥ç«™ç«‹",-1)),t[3]||(t[3]=s("div",{class:"metric-icon"},"ğŸ“…",-1))]),s("div",K,[s("div",Q,o(r(a).currentStreak),1),t[4]||(t[4]=s("div",{class:"metric-label"},"å½“å‰è¿èƒœ",-1)),t[5]||(t[5]=s("div",{class:"metric-icon"},"ğŸ”¥",-1))]),s("div",X,[s("div",Y,o(r(a).totalPoints),1),t[6]||(t[6]=s("div",{class:"metric-label"},"æ€»ç§¯åˆ†",-1)),t[7]||(t[7]=s("div",{class:"metric-icon"},"â­",-1))])]),s("div",Z,[t[11]||(t[11]=s("h3",null,"ğŸ’ª å¥åº·å½±å“ä¼°ç®—",-1)),s("div",tt,[s("div",st,[s("div",at,o(S.value),1),t[8]||(t[8]=s("div",{class:"impact-label"},"é¢å¤–æ¶ˆè€—å¡è·¯é‡Œ",-1))]),s("div",et,[s("div",ot,o(b.value),1),t[9]||(t[9]=s("div",{class:"impact-label"},"ç«™ç«‹æ€»æ—¶é•¿",-1))]),s("div",nt,[s("div",it,o(g.value),1),t[10]||(t[10]=s("div",{class:"impact-label"},"å¥åº·è¯„åˆ†",-1))])])]),s("div",lt,[t[12]||(t[12]=s("h3",null,"ğŸ“ˆ ç«™ç«‹å†å²",-1)),s("div",dt,[s("div",rt,[(m(!0),f(U,null,B(v.value,(n,d)=>(m(),f("div",{key:d,class:"chart-bar-group"},[s("div",{class:F(["chart-bar",{active:n.isToday}]),style:V({height:n.stands/y.value*100+"%"})},null,6),s("div",ct,o(n.label),1),s("div",vt,o(n.stands),1)]))),128))])])]),s("div",ut,[t[19]||(t[19]=s("h3",null,"ğŸ“‹ è¯¦ç»†ç»Ÿè®¡",-1)),s("div",pt,[s("div",mt,[t[13]||(t[13]=s("span",{class:"label"},"æœ€é•¿è¿èƒœ",-1)),s("span",ft,o(r(a).longestStreak)+" å¤©",1)]),s("div",ht,[t[14]||(t[14]=s("span",{class:"label"},"å¹³å‡æ¯æ—¥ç«™ç«‹",-1)),s("span",_t,o(k.value)+" æ¬¡",1)]),s("div",St,[t[15]||(t[15]=s("span",{class:"label"},"æœ¬å‘¨ç«™ç«‹",-1)),s("span",bt,o(w.value)+" æ¬¡",1)]),s("div",gt,[t[16]||(t[16]=s("span",{class:"label"},"æœ¬æœˆç«™ç«‹",-1)),s("span",yt,o(D.value)+" æ¬¡",1)]),s("div",kt,[t[17]||(t[17]=s("span",{class:"label"},"å® ç‰©ç­‰çº§",-1)),s("span",wt,o(r(a).pet.level),1)]),s("div",Dt,[t[18]||(t[18]=s("span",{class:"label"},"è§£é”æˆå°±",-1)),s("span",xt,o(x.value)+"/"+o(T.value),1)])])]),t[26]||(t[26]=O('<div class="health-tips" data-v-e8dfd949><h3 data-v-e8dfd949>ğŸ’¡ å¥åº·å»ºè®®</h3><div class="tips-grid" data-v-e8dfd949><div class="tip-card" data-v-e8dfd949><div class="tip-icon" data-v-e8dfd949>ğŸ¯</div><div class="tip-text" data-v-e8dfd949>ç»§ç»­ä¿æŒï¼Œä½ åšå¾—å¾ˆå¥½ï¼</div></div><div class="tip-card" data-v-e8dfd949><div class="tip-icon" data-v-e8dfd949>âš¡</div><div class="tip-text" data-v-e8dfd949>å°è¯•å¢åŠ ç«™ç«‹æ—¶é•¿åˆ°10åˆ†é’Ÿ</div></div><div class="tip-card" data-v-e8dfd949><div class="tip-icon" data-v-e8dfd949>ğŸŒŸ</div><div class="tip-text" data-v-e8dfd949>é…åˆä¼¸å±•è¿åŠ¨æ•ˆæœæ›´ä½³</div></div></div></div>',1)),s("div",{class:"data-actions"},[t[23]||(t[23]=s("h3",null,"ğŸ’¾ æ•°æ®ç®¡ç†",-1)),s("div",{class:"action-buttons"},[s("button",{class:"action-btn",onClick:$},[...t[20]||(t[20]=[s("span",null,"ğŸ“¤",-1),h(" å¯¼å‡ºæ•°æ® ",-1)])]),s("button",{class:"action-btn",onClick:j},[...t[21]||(t[21]=[s("span",null,"ğŸ”„",-1),h(" é‡ç½®æ•°æ® ",-1)])]),s("button",{class:"action-btn",onClick:C},[...t[22]||(t[22]=[s("span",null,"ğŸ¯",-1),h(" åˆ†äº«è¿›åº¦ ",-1)])])])])])]))}},jt=A(Tt,[["__scopeId","data-v-e8dfd949"]]);export{jt as default};
